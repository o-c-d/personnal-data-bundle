{% extends '@WebProfiler/Profiler/layout.html.twig' %}

{% block toolbar %}
    {% set icon %}
        {# this is the content displayed as a panel in the toolbar #}
        <!-- Color 
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16">
            <path
                fill="#999"
                d="M 3.5 1 C 2.6774686 1 2 1.6774686 2 2.5 L 2 12.5 C 2 13.322531 2.6774686 14 3.5 14 L 9.9511719 14 C 10.181351 14.286186 10.423778 14.549265 10.669922 14.765625 C 11.4783 15.476189 12.289062 15.851562 12.289062 15.851562 L 12.503906 15.951172 L 12.716797 15.847656 C 12.716797 15.847656 13.525396 15.461176 14.332031 14.746094 C 15.138667 14.031011 16 12.943492 16 11.521484 L 16 9.4648438 C 16 8.9908437 15.674662 8.5689767 15.214844 8.4511719 L 15.212891 8.4511719 C 14.906597 8.3731201 14.465781 8.2661237 14 8.1757812 L 14 2.5 C 14 1.6774686 13.322531 1 12.5 1 L 3.5 1 z M 3.5 2 L 12.5 2 C 12.781469 2 13 2.2185314 13 2.5 L 13 5 L 6 5 L 6 6 L 13 6 L 13 8.0332031 C 12.829773 8.0176047 12.656622 8 12.5 8 C 11.609242 8 10.423558 8.2900199 9.7871094 8.4511719 L 9.7851562 8.4511719 C 9.4875689 8.5274127 9.2581983 8.7373407 9.125 9 L 6 9 L 6 10 L 9 10 L 9 11.521484 C 9 12.064737 9.1226195 12.557751 9.3183594 13 L 3.5 13 C 3.2185314 13 3 12.781469 3 12.5 L 3 10 L 5 10 L 5 9 L 3 9 L 3 6 L 5 6 L 5 5 L 3 5 L 3 2.5 C 3 2.2185314 3.2185314 2 3.5 2 z M 12.5 9 C 13.151242 9 14.356162 9.2643274 14.966797 9.4199219 C 14.990977 9.4261219 15 9.4388438 15 9.4648438 L 15 11.521484 C 15 12.532477 14.361333 13.383379 13.667969 13.998047 C 13.08133 14.518102 12.66242 14.714741 12.496094 14.800781 C 12.329117 14.716781 11.91419 14.527107 11.330078 14.013672 C 10.638459 13.405736 10 12.559871 10 11.521484 L 10 9.4648438 C 10 9.4388438 10.009003 9.4261169 10.033203 9.4199219 C 10.644758 9.265074 11.848758 9 12.5 9 z">
            </path>
        </svg> -->
        <!-- Material Two Tone 
        <svg xmlns="http://www.w3.org/2000/svg" version="1.0" viewBox="0 0 48 48">
            <path fill="#D1C4E9"
                d="M38 7H10C8.9 7 8 7.9 8 9v6c0 1.1.9 2 2 2h28c1.1 0 2-.9 2-2V9C40 7.9 39.1 7 38 7zM38 19H10c-1.1 0-2 .9-2 2v6c0 1.1.9 2 2 2h25.1c1.3-1.3 4.9-.9 4.9-2v-6C40 19.9 39.1 19 38 19zM34.4 31H10c-1.1 0-2 .9-2 2v6c0 1.1.9 2 2 2h28c1.1 0 2-.9 2-2v-2.4C40 33.5 37.5 31 34.4 31z">
            </path>
            <path fill="#009688"
                d="M46,25H32c-1.1,0-2,0.9-2,2v11.8c0,1.3,0.6,2.4,1.6,3.2l7.4,5.5l7.4-5.5c1-0.8,1.6-1.9,1.6-3.2V27C48,25.9,47.1,25,46,25z">
            </path>
        </svg> -->
        <!-- Office XS  -->
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16">
            <path fill="#EEE" d="M8,14.5c-3.2,0-5.5-1.3-5.5-2.5V4h11v8C13.5,13.2,11.2,14.5,8,14.5z"></path>
            <path fill="#222" d="M13,4.5V12c0,0.8-1.9,2-5,2s-5-1.2-5-2V4.5H13 M14,3.5H2c0,0,0,7.7,0,8.5c0,1.7,2.7,3,6,3 s6-1.3,6-3C14,11.2,14,3.5,14,3.5L14,3.5z"></path>
            <path fill="#EEE" d="M8,5.5c-3.1,0-5.5-1.1-5.5-2s2.4-2,5.5-2s5.5,1.1,5.5,2S11.1,5.5,8,5.5z"></path>
            <path fill="#222" d="M8 2c3.3 0 5 1.1 5 1.5S11.3 5 8 5 3 3.9 3 3.5 4.7 2 8 2M8 1C4.7 1 2 2.1 2 3.5S4.7 6 8 6s6-1.1 6-2.5S11.3 1 8 1L8 1zM8 9C4.6 9 2 7.8 2 6.2h1C3 7 4.9 8 8 8s5-1 5-1.8h1C14 7.8 11.4 9 8 9zM8 12c-3.4 0-6-1.2-6-2.8h1C3 10 4.9 11 8 11s5-1 5-1.8h1C14 10.8 11.4 12 8 12z"></path>
            <g>
                <!-- Contour interne -->
                <path fill="{{ collector.statusColor }}" d="M11.5,15.5c-0.7-0.3-3.8-1.7-4-6.8l4-1.2l4,1.2C15.3,13.8,12.2,15.2,11.5,15.5z"></path>
                <!-- Contour Externe -->
                <path fill="{{ collector.statusColor }}" d="M11.5,8l3.5,1c-0.3,4.1-2.7,5.5-3.5,5.9c-0.8-0.4-3.2-1.7-3.5-5.9L11.5,8 M11.5,7L7,8.3 c0,6.4,4.5,7.7,4.5,7.7S16,14.8,16,8.3L11.5,7L11.5,7z"></path>
                <!-- Fill  -->
                <path fill="{{ collector.statusColor }}" d="M11.5,13.8c-0.8-0.4-2-1.5-2.4-4l2.4-0.7l2.4,0.7C13.5,12.3,12.3,13.4,11.5,13.8z"></path>
            </g>
        </svg>
        
         <!-- IOS Filled 
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 50 50">
            <path
                fill="#999"
                d="M 21.001953 0 C 8.4399531 0 -2.3684758e-15 4.6530469 0 8.9980469 C 0 13.343047 8.4399531 18 21.001953 18 C 33.563953 18 42 13.345047 42 8.9980469 C 42 4.6530469 33.563953 -1.1842379e-15 21.001953 0 z M 0 13.550781 L 0 19.091797 C 0 23.365797 8.4455781 28 21.017578 28 C 22.404578 28 23.730719 27.876484 25.011719 27.771484 C 25.023719 28.529484 25.056234 29.268469 25.115234 29.980469 C 23.786234 30.088469 22.420578 30 21.017578 30 C 11.597578 30 3.6779531 27.603563 0.001953125 23.851562 L 0.001953125 29.136719 C 0.001953125 33.409719 8.4455781 38 21.017578 38 C 23.053578 38 24.967578 37.853766 26.767578 37.634766 C 27.044578 38.378766 27.343109 39.086906 27.662109 39.753906 C 25.565109 40.042906 23.337578 40 21.017578 40 C 11.597578 40 3.6779531 37.649484 0.001953125 33.896484 L 0.001953125 39.089844 C 0.001953125 43.362844 8.4455781 47.939453 21.017578 47.939453 C 25.395578 47.939453 29.257172 47.376656 32.451172 46.472656 C 34.810172 48.785656 36.867359 49.803391 37.068359 49.900391 L 37.521484 50.119141 L 37.966797 49.884766 C 38.457797 49.625766 50 43.36775 50 27.21875 L 50 26.410156 L 49.210938 26.240234 C 45.214937 25.377234 42.852953 24.152766 41.126953 23.259766 C 40.611953 22.993766 40.144453 22.762547 39.689453 22.560547 C 39.818453 22.579547 39.949031 22.611781 40.082031 22.675781 C 41.335031 21.529781 42 20.300797 42 19.091797 L 42 13.550781 C 38.325 17.304781 30.434578 20 21.017578 20 C 11.597578 20 3.676 17.303781 0 13.550781 z M 37.498047 23.998047 C 38.204047 23.998047 39.044078 24.434156 40.205078 25.035156 C 41.914078 25.920156 44.211281 27.110672 47.988281 28.013672 C 47.662281 40.801672 39.525469 46.599469 37.480469 47.855469 C 35.429469 46.681469 27.324766 41.213672 27.009766 28.013672 C 30.785766 27.110672 33.083969 25.920156 34.792969 25.035156 C 35.953969 24.434156 36.792047 23.998047 37.498047 23.998047 z">
            </path>
        </svg>-->
        <span class="sf-toolbar-value" title="PersonnalData">{{ collector.collected|countPersonnalDataFromDb + collector.exposed|countPersonnalDataFromDb }}/{{ collector.transports|countPersonnalDataFromEvent + collector.processes|countPersonnalDataFromEvent }}</span>
    {% endset %}

    {% set text %}
        {# this is the content displayed when hovering the mouse over
           the toolbar panel #}
        <h2>Personnal Data</h2>
        <div class="sf-toolbar-info-piece">
            <b>Collected Personnal Data</b>
            <span>{{ collector.collected|countPersonnalDataFromDb }}</span>
        </div>

        <div class="sf-toolbar-info-piece">
            <b>Exposed Personnal Data</b>
            <span>{{ collector.exposed|countPersonnalDataFromDb }}</span>
        </div>

        <div class="sf-toolbar-info-piece">
            <b>Personnal Data Transports</b>
            <span>{{ collector.transports|countPersonnalDataFromEvent }}</span>
        </div>

        <div class="sf-toolbar-info-piece">
            <b>Personnal Data Processes</b>
            <span>{{ collector.processes|countPersonnalDataFromEvent }}</span>
        </div>
    {% endset %}
    
    {{ include('@WebProfiler/Profiler/toolbar_item.html.twig', { link: profiler_url }) }}
{% endblock %}


{% block head %}
    {# Optional. Here you can link to or define your own CSS and JS contents. #}
    {# Use {{ parent() }} to extend the default styles instead of overriding them. #}
    {{ parent() }}
{% endblock %}

{% block menu %}
    {# This left-hand menu appears when using the full-screen profiler. #}
    <span class="label">
        <span class="icon">
            {#{ include('@OcdPersonnalData/DataCollector/privacy.svg') }#}
            <img src="data:image/png;base64, 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" alt="privacy"/>
            <!-- <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16">
                <path fill="#EEE" d="M8,14.5c-3.2,0-5.5-1.3-5.5-2.5V4h11v8C13.5,13.2,11.2,14.5,8,14.5z"></path>
                <path fill="#222"
                    d="M13,4.5V12c0,0.8-1.9,2-5,2s-5-1.2-5-2V4.5H13 M14,3.5H2c0,0,0,7.7,0,8.5c0,1.7,2.7,3,6,3 s6-1.3,6-3C14,11.2,14,3.5,14,3.5L14,3.5z">
                </path>
                <path fill="#EEE" d="M8,5.5c-3.1,0-5.5-1.1-5.5-2s2.4-2,5.5-2s5.5,1.1,5.5,2S11.1,5.5,8,5.5z"></path>
                <path fill="#222"
                    d="M8 2c3.3 0 5 1.1 5 1.5S11.3 5 8 5 3 3.9 3 3.5 4.7 2 8 2M8 1C4.7 1 2 2.1 2 3.5S4.7 6 8 6s6-1.1 6-2.5S11.3 1 8 1L8 1zM8 9C4.6 9 2 7.8 2 6.2h1C3 7 4.9 8 8 8s5-1 5-1.8h1C14 7.8 11.4 9 8 9zM8 12c-3.4 0-6-1.2-6-2.8h1C3 10 4.9 11 8 11s5-1 5-1.8h1C14 10.8 11.4 12 8 12z">
                </path>
                <g>
                    <path fill="{{ collector.statusColor }}"
                        d="M11.5,15.5c-0.7-0.3-3.8-1.7-4-6.8l4-1.2l4,1.2C15.3,13.8,12.2,15.2,11.5,15.5z"></path>
                    <path fill="{{ collector.statusColor }}"
                        d="M11.5,8l3.5,1c-0.3,4.1-2.7,5.5-3.5,5.9c-0.8-0.4-3.2-1.7-3.5-5.9L11.5,8 M11.5,7L7,8.3 c0,6.4,4.5,7.7,4.5,7.7S16,14.8,16,8.3L11.5,7L11.5,7z">
                    </path>
                    <path fill="{{ collector.statusColor }}"
                        d="M11.5,13.8c-0.8-0.4-2-1.5-2.4-4l2.4-0.7l2.4,0.7C13.5,12.3,12.3,13.4,11.5,13.8z"></path>
                </g>
            </svg> -->
        </span>
        <strong>Personnal Data</strong>
    </span>
{% endblock %}


{% import "@OcdPersonnalData/DataCollector/macros/personnalDataContext.html.twig" as personnalDataContext %}
{% import "@OcdPersonnalData/DataCollector/macros/personnalDataRegister.html.twig" as personnalDataRegister %}
{% import "@OcdPersonnalData/DataCollector/macros/personnalDataProcess.html.twig" as personnalDataProcess %}

{% block panel %}
    {# Optional, for showing the most details. #}
    {% if collector.collected|countPersonnalDataFromDb > 0 %}
    <h2>Collected Personnal Data ({{ collector.collected|countPersonnalDataFromDb }})</h2>
        {{ personnalDataContext.table(collector.collected) }}
    {% endif %}

    {% if collector.exposed|countPersonnalDataFromDb > 0 %}
    <h2>Exposed Personnal Data ({{ collector.exposed|countPersonnalDataFromDb }})</h2>
        {{ personnalDataContext.table(collector.exposed) }}
    {% endif %}

    {% if collector.transports|countPersonnalDataFromEvent > 0 %}
    <h2>Transports Personnal Data ({{ collector.transports|countPersonnalDataFromEvent }})</h2>
        {#{ personnalDataRegister.table(collector.transports) }#}
    {% endif %}

    {% if collector.processes|countPersonnalDataFromEvent > 0 %}
    <h2>Processes Personnal Data ({{ collector.processes|countPersonnalDataFromEvent }})</h2>
        {{ personnalDataProcess.table(collector.processes) }}
    {% endif %}
{% endblock %}